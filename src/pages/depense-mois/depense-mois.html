<!--
  Generated template for the DepenseMoisPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="marseille">
    <ion-title>{{NOM_DU_PROJET}}: Dépense-mois</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>

  <div *ngIf="!yearpaye.length==0">

    <ion-item>
      <ion-label>Année</ion-label>

      <ion-select interface="popover" [(ngModel)]="year" (ionChange)="show(year,month,type,query)">
        <ion-option *ngFor="let item of yearpaye" value={{item.DATE_PAYEMENT}}>{{item.DATE_PAYEMENT}}</ion-option>
      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label>Mois</ion-label>

      <ion-select interface="popover" [(ngModel)]="month" (ionChange)="show(year,month,type,query)">

        <ion-option value="1">janvier</ion-option>
        <ion-option value="2">Février</ion-option>
        <ion-option value="3">Mars</ion-option>
        <ion-option value="4">Avril</ion-option>
        <ion-option value="5">Mai</ion-option>
        <ion-option value="6">Juin</ion-option>
        <ion-option value="7">Juillet</ion-option>
        <ion-option value="8">Aout</ion-option>
        <ion-option value="9">Séptembre</ion-option>
        <ion-option value="10">Octobre</ion-option>
        <ion-option value="11">Novembre</ion-option>
        <ion-option value="12">Décembre</ion-option>


      </ion-select>
    </ion-item>
    <ion-item>
      <ion-label>Type</ion-label>

      <ion-select interface="popover" [(ngModel)]="type" (ionChange)="show(year,month,type,query)">

        <ion-option value="general">Tout</ion-option>
        <ion-option value="fournisseur">Fournisseur</ion-option>
        <ion-option value="soustraitant">Soustraitant</ion-option>


      </ion-select>
    </ion-item>


    <!-- <button ion-button color="primary" (click)="show(year,month,type,query)"> SHOW detail</button> -->


    <ion-grid>

      <ion-row justify-content-center>
        <ion-col col-md-7>
          <ion-searchbar *ngIf="showme && query!=''" style="margin-top: 40px!important; margin-bottom: 25px!important;"
            placeholder="Rechercher..." [(ngModel)]="query" (ionChange)="show(year,month,type,query)"></ion-searchbar>

          <div *ngIf="showme">
            <h5 *ngIf="depense.length==0 && query!=''" text-center class="redIcon"> <br>Le nom <b>{{ query }} n'existe
                pas
                !!!</b></h5>

            <h5 *ngIf="depense.length==0 " text-center class="redIcon"> <br> <b>aucun payement pour cette date

              !!!</b></h5>
          </div>
        </ion-col>
      </ion-row>
      <ion-row justify-content-center>
        <ion-col col-md-7>
          <div *ngIf="showme==true ">
            <p *ngIf="!depense.length==0" style="font-size: 20px;text-align: center; margin-bottom: 45px;"><b>Total
                Dépense :</b> <br>
              {{format(TOTAL)}} DZD</p>
            <div *ngFor="let item of depense">



              <ion-card>
                <ion-card-content>
                  <p>Nom complet:{{item.PRENOM}} {{item.NOM}}</p>
                  <p>Depense: {{item.DEPENSE}}</p>
                  <p>Type: {{item.TYPE_D}}</p>


                </ion-card-content>
              </ion-card>

            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>